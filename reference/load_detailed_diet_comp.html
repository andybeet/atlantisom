<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Load Atlantis diet composition by box and layer from DetaileDietCheck.txt — load_detailed_diet_comp • atlantisom</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Load Atlantis diet composition by box and layer from DetaileDietCheck.txt — load_detailed_diet_comp"><meta property="og:description" content="Imports the DetaileDietCheck.txt output file from an Atlantis run
and converts the file from wide format to long, where there are seven
columns: (predator) species, age class, time in days, polygon, layer,
diet composition in tons (assuming flagdietcheck=1), and prey (species).
Only non-zero values for diet compostion are included."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">atlantisom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/atlantisom.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/AtlantisToStockAssessment.html">AtlantisOMtoSSVignette</a>
    </li>
    <li>
      <a href="../articles/NEMoW_demo.html">atlantisom demo notebook</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load Atlantis diet composition by box and layer from <code>DetaileDietCheck.txt</code></h1>
    
    <div class="hidden name"><code>load_detailed_diet_comp.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Imports the <code>DetaileDietCheck.txt</code> output file from an Atlantis run
and converts the file from wide format to long, where there are seven
columns: (predator) species, age class, time in days, polygon, layer,
diet composition in tons (assuming flagdietcheck=1), and prey (species).
Only non-zero values for diet compostion are included.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_detailed_diet_comp</span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">file_diet</span>, <span class="va">fgs</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dir</dt>
<dd><p>The directory of the atlantis model output, where the
default is <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code>.</p></dd>


<dt>file_diet</dt>
<dd><p>A character value, specifying the file name of the
<code>DetailedDietCheck.txt</code> output file from Atlantis (or see above).
This file is read with <code><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code>, so it can be
compressed with a .gz suffix, or uncompressed as a .txt file.
If <code>is.null(dir)</code>, then <code>file_diet</code> can be the full file
path or a file in your current working directory, or the <code>file_diet</code>
will be appended to <code>dir</code> using <code>file.path</code>.</p></dd>


<dt>fgs</dt>
<dd><p>A data frame created by <code><a href="load_fgs.html">load_fgs</a></code> that
reads in the csv file containing functional group names, usually
<code>"functionalGroups.csv"</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns a data frame of the data to be exported to the AtlantisOM list
 object. The atoutput column is diet in tons and there is an extra column
 identifying the prey that makes up that proportion of species (predator)
 diet.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>NOTE: <code>DetaileDietCheck.txt</code> is extremely large. We recommend working
with it compressed and using the following pre-processing steps
at the command line to remove the all-0 rows:
Execute in terminal from the directory with the .gz file in it:
<code>zcat &lt; [...]DetailedDietCheck.txt.gz | awk 'NR &gt; 1{s=0; for (i=6;i&lt;=NF;i++) s+=$i; if (s!=0)print}' | gzip &gt; DetDiet.gz</code>
On linux it would just be zcat filename; macOS needs zcat &lt; filename to work.
The awk statement is saying after the header row (NR&gt;1), sum up the values
from column 6 to the last column and keep the row if they are &gt;0.
The last pipe sends the new file to a zip file.
The column names will be lost, so strip them from the file and cat back together:
<code>zcat &lt; [...]DetailedDietCheck.txt.gz | head -n1 | gzip &gt; DetDietHead.gz</code>
<code>cat DetDietHead.gz DetDiet.gz &gt; [...]DetDiet.gz</code>
Then use [...]DetDiet.gz as your input to this function</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other load functions: 
<code><a href="load_agebioind.html">load_agebioind</a>()</code>,
<code><a href="load_bioind.html">load_bioind</a>()</code>,
<code><a href="load_biolprm.html">load_biolprm</a>()</code>,
<code><a href="load_boxarea.html">load_boxarea</a>()</code>,
<code><a href="load_box.html">load_box</a>()</code>,
<code><a href="load_bps.html">load_bps</a>()</code>,
<code><a href="load_catch.html">load_catch</a>()</code>,
<code><a href="load_diet_comp.html">load_diet_comp</a>()</code>,
<code><a href="load_fgs.html">load_fgs</a>()</code>,
<code><a href="load_fisheries.html">load_fisheries</a>()</code>,
<code><a href="load_meta.html">load_meta</a>()</code>,
<code><a href="load_nc_annage.html">load_nc_annage</a>()</code>,
<code><a href="load_nc.html">load_nc</a>()</code>,
<code><a href="load_runprm.html">load_runprm</a>()</code>,
<code><a href="load_yoy.html">load_yoy</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Sarah Gaichas</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"SETAS_Example"</span>, package <span class="op">=</span> <span class="st">"atlantisom"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">file_diet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"DetailedDietCheck"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="load_fgs.html">load_fgs</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="va">d</span>, <span class="st">"Functional_groups.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu">load__detailed_diet_comp</span><span class="op">(</span>dir <span class="op">=</span> <span class="va">d</span>, file_diet <span class="op">=</span> <span class="va">file_diet</span>, fgs <span class="op">=</span> <span class="va">fgs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gavin Fay, Sarah Gaichas, Beth Fulton, Allan Hicks, Emma Hodgson, Kelli Johnson, Isaac Kaplan, Alexander Keth, Sean Lucey, Matteo Sinerchia, Howard Townsend.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

