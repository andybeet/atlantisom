<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate length from ages — calc_age2length • atlantisom</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate length from ages — calc_age2length"><meta property="og:description" content="Calculate length composition in 1 cm bins from Atlantis output (st)age data
Uses numbers at age, plus weight at age, and weight-length relationships to
generate size comps"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">atlantisom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/atlantisom.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/AtlantisToStockAssessment.html">AtlantisOMtoSSVignette</a>
    </li>
    <li>
      <a href="../articles/NEMoW_demo.html">atlantisom demo notebook</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate length from ages</h1>
    
    <div class="hidden name"><code>calc_age2length.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate length composition in 1 cm bins from Atlantis output (st)age data
Uses numbers at age, plus weight at age, and weight-length relationships to
generate size comps</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_age2length</span><span class="op">(</span></span>
<span>  <span class="va">structn</span>,</span>
<span>  <span class="va">resn</span>,</span>
<span>  <span class="va">nums</span>,</span>
<span>  <span class="va">biolprm</span>,</span>
<span>  <span class="va">fgs</span>,</span>
<span>  maxbin <span class="op">=</span> <span class="fl">150</span>,</span>
<span>  CVlenage <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  remove.zeroes <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>structn</dt>
<dd><p>A <code>data.frame</code> containing the structural nitrogen per functional-group
("species") per timestep, ageclass, layer and polygon.
The <code>data.frame</code> has to origininate from <code><a href="load_nc.html">load_nc</a></code> using
<code>select_variable = "StructN"</code>.</p></dd>


<dt>resn</dt>
<dd><p>A <code>data.frame</code> containing the reserve nitrogen per functional-group
("species") per timestep, ageclass, layer and polygon.
The <code>data.frame</code> has to origininate from <code><a href="load_nc.html">load_nc</a></code> using
<code>select_variable = "ResN"</code>.</p></dd>


<dt>nums</dt>
<dd><p>A <code>data.frame</code> containing the numbers per functional-group
("species") per timesetp, ageclass, layer and polygon.
The <code>data.frame</code> has to origininate from <code><a href="load_nc.html">load_nc</a></code> using
<code>select_variable = "Nums"</code>.</p></dd>


<dt>biolprm</dt>
<dd><p>A list of biological parameters available from the
<code>[...]_Biol.prm</code> file, as read in by <code><a href="load_biolprm.html">load_biolprm</a></code>.</p></dd>


<dt>fgs</dt>
<dd><p>A data frame created by <code><a href="load_fgs.html">load_fgs</a></code> that
reads in the csv file containing functional group names, usually
<code>"functionalGroups.csv"</code>.</p></dd>


<dt>maxbin</dt>
<dd><p>The upper length (cm) bin applied to all species sampled. The default
value is 150.
Optionally, a <code>data.frame</code> can be supplied for multiple species with different
species lengths: Columns are:
                species: the species name. Matches names in species
                maxlenbin:  the upper length (cm) bin applied to that species</p></dd>


<dt>CVlenage</dt>
<dd><p>The variability in length at age (same for all species)
The default value is 0.1.
Optionally, a <code>data.frame</code> can be supplied for multiple species with different
CV of length at age: Columns are:
                species: the species name. Matches names in species
                cvlenage:  the variability in length at age for that species</p></dd>


<dt>remove.zeroes</dt>
<dd><p>Logical asking whether to only return numbers at length for
combinations of species, age, box, depth, etc that have numbers&gt;0.
The default value is <code>TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>list</code> containing three <code>data.frame</code>s, mulen (mean length at age),
muweight (mean weight at age), and natlength (numbers at length). natlength is in the
same format as other dataframes in the atlantisom package except has two additional
columns to include the length bin information.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other calc functions: 
<code><a href="calc_Z.html">calc_Z</a>()</code>,
<code><a href="calc_avgwtstage2age.html">calc_avgwtstage2age</a>()</code>,
<code><a href="calc_biomass_age.html">calc_biomass_age</a>()</code>,
<code><a href="calc_pred_diet.html">calc_pred_diet</a>()</code>,
<code><a href="calc_stage2age.html">calc_stage2age</a>()</code>,
<code><a href="calc_timestep2time.html">calc_timestep2time</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Gavin Fay</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"SETAS_Example"</span>, package <span class="op">=</span> <span class="st">"atlantisom"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">directory</span>, <span class="st">"outputsrun_truth.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># WARNING: EXTREMELY LONG RUN TIME for all species at full model resolution!</span></span></span>
<span class="r-in"><span><span class="co"># even one species has a long run time; this works but takes minutes to return</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">structn</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">structn</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">structn</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Demersal_S_Fish"</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">resn</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">resn</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">resn</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Demersal_S_Fish"</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">nums</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">nums</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">nums</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Demersal_S_Fish"</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">lenout</span> <span class="op">&lt;-</span> <span class="fu">calc_age2length</span><span class="op">(</span></span></span>
<span class="r-in"><span>  structn<span class="op">=</span><span class="va">result</span><span class="op">$</span><span class="va">structn</span>, resn<span class="op">=</span><span class="va">result</span><span class="op">$</span><span class="va">resn</span>, nums<span class="op">=</span><span class="va">result</span><span class="op">$</span><span class="va">nums</span>,</span></span>
<span class="r-in"><span>  biolprm <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">biolprm</span>, fgs <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">fgs</span>,</span></span>
<span class="r-in"><span>  CVlenage <span class="op">=</span> <span class="fl">0.1</span>, remove.zeroes<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">lenout</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">lenout</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gavin Fay, Sarah Gaichas, Beth Fulton, Allan Hicks, Emma Hodgson, Kelli Johnson, Isaac Kaplan, Alexander Keth, Sean Lucey, Matteo Sinerchia, Howard Townsend.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

